<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[4-8_電波法] 練習問題 (30問)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
        }
    </style>

    <!-- 
      スクリプトは <head> から <body> の末尾に移動しました。
      DOM要素が読み込まれる前にスクリプトが実行されて
      'practice-container' が見つからないエラーを防ぐためです。
    -->
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto px-4 py-12 max-w-3xl">

        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">[4-8 電波法] 練習問題 (30問)</h1>
            <p class="mt-3 text-lg text-gray-600">PDF資料の重要ポイント（太字・赤字）を基にした確認問題です。</p>
        </header>

        <!-- 練習問題コンテナ -->
        <main id="practice-container" class="space-y-8">
            <!-- 問題はJavaScriptによってここに動的に挿入されます -->
        </main>

        <footer class="text-center mt-12 pt-8 border-t border-gray-300">
            <a href="index.html" 
               class="inline-block bg-gray-600 text-white text-lg font-bold py-3 px-8 rounded-lg shadow-md hover:bg-gray-700 transition-colors duration-300 ease-in-out">
                トップページに戻る
            </a>
        </footer>

    </div>

    <!-- スクリプトを <body> の末尾に移動 -->
    <script>
        // 練習問題データ (JSONファイルから)
        // ※解説はPDF資料に基づき、このスクリプト内で補足しています。
        const practiceQuestions = [
            { questionId: "PQ001", topic: "免許", questionType: "multipleChoice", questionText: "無線関係の「免許」に関する記述として、最も適切なものはどれか。", options: [{ text: "無線局免許は「人」に対する免許である。", isCorrect: false }, { text: "無線従事者免許は「設備」に対する免許である。", isCorrect: false }, { text: "無線局免許は「自動車の運転免許証」に例えられる。", isCorrect: false }, { text: "無線従事者免許は「人」が操作するスキルに対する免許である。", isCorrect: true }], explanation: "無線局免許は「設備（モノ）」に対する免許（例：車検証）、無線従事者免許は「人」のスキルに対する免許（例：運転免許証）です。" },
            { questionId: "PQ002", topic: "免許", questionType: "multipleChoice", questionText: "無線局の免許状に記載される事項として、「電波法」上、正しいものはどれか。", options: [{ text: "主任無線従事者の資格", isCorrect: false }, { text: "無線従事者の氏名", isCorrect: false }, { text: "無線設備の設置場所", isCorrect: true }, { text: "無線従事者免許の番号", isCorrect: false }], explanation: "無線局免許状には、その「設備」に関する情報（設置場所、電波の型式、周波数など）が記載されます。「主任無線従事者の資格」などは「人」に関する情報のため記載されません。" },
            // ... (中略) ...
            { questionId: "PQ030", topic: "非常通信", questionType: "multipleChoice", questionText: "「交通通信の確保」が非常通信の目的として重要な理由として、資料で暗に示されている内容はどれか。", options: [{ text: "通信衛星の軌道を確保するため。", isCorrect: false }, { text: "救急車や支援物資のトラックなどの移動を可能にするため。", isCorrect: true }, { text: "一般市民の交通費を精算するため。", isCorrect: false }, { text: "観光情報を発信するため。", isCorrect: false }], explanation: "災害時、救助や救援活動を行う車両（救急車、消防車、物資輸送トラックなど）が移動できなければ意味がありません。そのため「交通通信の確保」が重要な目的とされています。" }
        ];

        // DOMが完全に読み込まれてからスクリプトを実行するように修正
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('practice-container');
            
            if (!container) {
                // コンテナが見つからない場合、コンソールにエラーを出力
                console.error("Error: 'practice-container' element not found.");
            } else {
                // コンテナが見つかった場合のみ、問題を描画
                practiceQuestions.forEach((q, index) => {
                    const questionIndex = index + 1;
                    
                    // 設問カード
                    const card = document.createElement('div');
                    card.className = 'bg-white p-6 rounded-lg shadow-md';
                    
                    // 問題番号と問題文
                    let questionHtml = `<h2 class="text-xl font-bold mb-4">
                                            <span class="text-blue-600">問題 ${questionIndex}</span>
                                            <span class="ml-2 text-gray-800">${q.questionText}</span>
                                        </h2>`;

                    // 選択肢 (4択の場合)
                    if (q.questionType === 'multipleChoice' && q.options.length > 0) {
                        questionHtml += '<ul class="space-y-2 mb-4 list-none pl-0">';
                        q.options.forEach((opt, i) => {
                            questionHtml += `<li class="ml-0 pl-0 text-gray-700">${String.fromCharCode(9312 + i)} ${opt.text}</li>`; // ①, ②, ...
                        });
                        questionHtml += '</ul>';
                    }

                    // 正解のテキストを取得
                    let correctAnswerText = "";
                    if (q.questionType === 'multipleChoice') {
                        const correctOption = q.options.find(opt => opt.isCorrect);
                        correctAnswerText = correctOption ? correctOption.text : "N/A";
                    } else {
                        correctAnswerText = q.correctAnswers.join(' または ');
                    }

                    // 解答・解説エリア (最初は非表示)
                    const answerId = `answer-${q.questionId}`;
                    const answerDiv = document.createElement('div');
                    answerDiv.id = answerId;
                    answerDiv.className = 'hidden mt-4 pt-4 border-t border-gray-200';
                    answerDiv.innerHTML = `
                        <p class="text-lg font-bold text-green-700">【正解】</p>
                        <p class="text-base mb-3">${correctAnswerText}</p>
                        <p class="text-lg font-bold text-gray-700">【解説】</p>
                        <p class="text-base text-gray-600">${q.explanation || '解説はありません。'}</p>
                    `;

                    // 解答・解説ボタン
                    const button = document.createElement('button');
                    button.className = 'mt-4 px-4 py-2 bg-gray-200 text-gray-800 font-semibold rounded-md hover:bg-gray-300 transition-colors';
                    button.textContent = '解答・解説を表示';
                    button.setAttribute('data-target', answerId);

                    // ボタンのクリックイベント
                    button.addEventListener('click', () => {
                        const targetDiv = document.getElementById(button.dataset.target);
                        // targetDivが存在するかを念のため確認
                        if (targetDiv) {
                            const isHidden = targetDiv.classList.toggle('hidden');
                            button.textContent = isHidden ? '解答・解説を表示' : '解答・解説を隠す';
                        }
                    });

                    card.innerHTML = questionHtml;
                    card.appendChild(button);
                    card.appendChild(answerDiv);
                    container.appendChild(card);
                });
            }
        });
    </script>

</body>
</html>

